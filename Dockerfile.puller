# Dockerfile.puller
FROM python:3.10-slim

RUN apt-get update && apt-get install -y --no-install-recommends git bash && rm -rf /var/lib/apt/lists/*

RUN pip install --no-cache-dir huggingface_hub==0.23.2

# Script que baixa pesos do LLM (GGUF) e embeddings para /models
COPY pull_models.py /pull_models.py

ENV HF_HOME=/models/hf
ENV TRANSFORMERS_CACHE=/models/hf
ENV HUGGINGFACE_HUB_CACHE=/models/hf

VOLUME ["/models"]

CMD ["python", "/pull_models.py"]
